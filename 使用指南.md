# 提示词权重曲线编辑器使用指南

## 安装步骤

1. 确保您已安装ComfyUI
2. 下载本插件，并放置在ComfyUI的`custom_nodes`目录中
   - 通过Git: `git clone https://github.com/yourusername/ComfyUI_Prompt-Weight-Timeline.git`
   - 或直接下载ZIP文件并解压
3. 重启ComfyUI
4. 在节点浏览器中搜索"提示词权重曲线编辑器"节点

## 基本用法

### 步骤1: 添加节点
在ComfyUI中，从节点浏览器中找到"提示词权重曲线编辑器"节点并添加到工作流中。

### 步骤2: 设置帧数
设置要生成的动画帧数。这决定了权重曲线的时间范围。

### 步骤3: 添加提示词
在曲线编辑器界面中，点击"添加提示词"按钮添加一个新的提示词。
- 默认会创建一条权重为1的水平线
- 每个提示词都有自己的颜色，便于区分

### 步骤4: 编辑曲线
选择一个提示词，然后使用以下工具编辑其权重曲线：
- 移动工具: 选择和移动控制点
- 添加点工具: 在曲线上添加新的控制点
- 删除点工具: 删除现有的控制点

### 步骤5: 设置曲线类型
对于每个提示词，可以选择不同的曲线类型：
- 线性: 直线连接控制点
- 贝塞尔: 平滑的曲线过渡
- 阶梯: 突变式变化

### 步骤6: 连接输出
将节点的输出连接到支持动态提示词的节点，如KSampler或其他文本处理节点。

## 高级功能

### 多提示词组合
可以在一个编辑器中添加多个提示词，它们的权重将根据各自的曲线独立变化。

### 预设曲线
可以使用预设按钮快速应用常见的动画效果：
- 渐入/渐出
- 脉冲
- 振荡
- 阶梯变化

### 导入/导出
可以将曲线设置保存为JSON格式，以便在不同项目间复用。

## 实际应用场景

### 场景过渡
创建从一个场景逐渐过渡到另一个场景的动画：
1. 添加两个提示词："森林"和"城市"
2. 为"森林"设置从权重1.0渐变到0.0的曲线
3. 为"城市"设置从权重0.0渐变到1.0的曲线

### 风格混合
在动画过程中混合不同风格：
1. 添加多个风格提示词："水彩"、"油画"、"素描"
2. 为每个风格设置在不同时间段突出的曲线

### 色彩变化
创建颜色随时间变化的动画：
1. 添加表示不同颜色的提示词："红色"、"绿色"、"蓝色"
2. 设置它们的权重曲线，使颜色随时间变化

## 故障排除

### 问题: 节点不出现在ComfyUI中
解决方案:
- 确认插件已正确安装在`custom_nodes`目录下
- 检查ComfyUI控制台是否有错误信息
- 重启ComfyUI

### 问题: 曲线编辑器界面不显示
解决方案:
- 确认浏览器已启用JavaScript
- 检查浏览器控制台是否有错误信息
- 尝试清除浏览器缓存并刷新页面

### 问题: 权重值不正确
解决方案:
- 确认控制点在有效范围内(0-1时间轴，0-5权重值)
- 检查曲线类型是否符合预期
- 尝试重置视图按钮重新校准坐标系

## 与其他节点配合使用

### KSampler节点
将提示词权重曲线编辑器的输出连接到KSampler节点的正向或负向提示输入，创建权重变化的图像序列。

### 动画插值节点
与其他动画相关节点组合，创建复杂的动画效果：
- ControlNet动画
- Lora强度动画
- 噪声种子动画

### 批处理节点
结合批处理节点，一次性生成完整的动画序列。

## 参考资源

- [ComfyUI官方文档](https://github.com/comfyanonymous/ComfyUI)
- [动态提示词格式说明](https://github.com/comfyanonymous/ComfyUI/wiki/Dynamic-Prompts)
- [视频教程链接](#)

---

如有任何问题或建议，请通过GitHub Issues联系我们。 